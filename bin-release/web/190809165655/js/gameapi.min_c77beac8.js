var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},MDisplay;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mInit=!1,e._mLoadMod=new GLoadModule,e}return __extends(e,t),e.prototype.beforeLoad=function(t,e){void 0==e||e!=GLoadModule.GroupType_UI&&e!=GLoadModule.GroupType_Flash&&e!=GLoadModule.GroupType_SheetUI&&e!=GLoadModule.GroupType_SheetFlash?this._mLoadMod.GaddItem(t):this._mLoadMod.GaddGroupRes(t,e)},e.prototype.GinitUIConfig=function(t){if(t&&""!=t){var i=t+".json";this._mLoadMod.GaddGroupRes(i,GLoadModule.GroupType_UI)&&(this._mUIConfigUrl=e.UIConfigUrl+i)}this._mLoadMod.Gbegin(this.onLoadedItems,this)},e.prototype.onLoadedItems=function(){this._mInit=!0,this.initUI(),this.onInit()},e.prototype.initUI=function(){if(this._mUIConfigUrl&&""!=this._mUIConfigUrl)for(var t=GResCache.getRes(this._mUIConfigUrl),i=t.list,n=0,o=i.length;o>n;n++){var r=new egret.Bitmap(GResCache.getRes(e.UIImageUrl+i[n].path));r.x=i[n].x,r.y=i[n].y,i[n].skx!=i[n].sky?(r.skewX=i[n].skx,r.skewY=i[n].sky,r.rotation=0):(r.rotation=i[n].r,r.skewX=0,r.skewY=0),r.scaleX=i[n].sx,r.scaleY=i[n].sy,r.name=i[n].n,this.addChild(r)}},e.prototype.onInit=function(){},e.UIConfigUrl="resource/assets/uiconfig/",e.UIImageUrl="resource/assets/images/ui/",e}(egret.DisplayObjectContainer);t.MUISprite=e,__reflect(e.prototype,"MDisplay.MUISprite")}(MDisplay||(MDisplay={}));var GSocketMager=function(){function t(){this._mSocketMap=new GHashMap}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.createSocket=function(t,e,i){void 0===i&&(i=1);var n=this._mSocketMap.Gget(i);null===n&&(n=new MNet.MSocketer(t,e),this._mSocketMap.Gput(i,n))},t.prototype.sendByteArr=function(t,e){void 0===e&&(e=1);var i=this._mSocketMap.Gget(e);null!=i&&i.sendByteArray(t)},t.prototype.closeSocket=function(t){void 0===t&&(t=1);var e=this._mSocketMap.Gget(t);null!=e&&e.closeSocket()},t.prototype.connectSocket=function(t){void 0===t&&(t=1);var e=this._mSocketMap.Gget(t);null!=e&&e.connectSocket()},t.prototype.cleanCacheArr=function(t){void 0===t&&(t=1);var e=this._mSocketMap.Gget(t);null!=e&&e.cleanCacheArr()},t}();__reflect(GSocketMager.prototype,"GSocketMager");var GMovieClipEvent=function(){function t(){}return t.loadedConfig="loadedConfig",t.played="MMovieClop_played",t.playing="MMovieClop_playing",t}();__reflect(GMovieClipEvent.prototype,"GMovieClipEvent");var GMovieMag=function(){function t(){this._mConfigDataMap=new GHashMap,this._mEnterFrameItems=new GHashMap}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.GonEnterFrame=function(){for(var t=this._mEnterFrameItems.keys,e=0,i=t;e<i.length;e++){var n=i[e],o=this._mEnterFrameItems.Gget(n);o.Mupdate()}},t.prototype.Madd2EnterFrame=function(t){void 0!=t&&this._mEnterFrameItems.Gput(t.hashCode,t)},t.prototype.MremoveEnterFrame=function(t){void 0!=t&&this._mEnterFrameItems.GremoveByKey(t.hashCode)},t.prototype.GgetMovieClip=function(t,e,i,n,o){var r=this._mConfigDataMap.Gget(t);null==r&&(r=new MDisplay.MMovieClipData,this._mConfigDataMap.Gput(t,r)),r.MloadConfig(t);var a=GObjPool.getInstance.GgetObj(MDisplay.MMovieClip);return null==a&&(a=new MDisplay.MMovieClip),a.MsetConfigData(r,e,i,n,o),a},t}();__reflect(GMovieMag.prototype,"GMovieMag");var MDisplay;!function(t){var e=function(e){function i(t,i,n,o,r,a,s,h,l,p,c,u,_,d,m,f,g,y,v,M,I,S,C,G,b){var T=e.call(this)||this;return T._lastAddTime=0,T._texture=t,T._lifeMin=i,T._lifeMax=n,T._interval=o,T._Max=r,T._xMin=a,T._xMax=s,T._xResMin=h,T._xResMax=l,T._YMin=p,T._YMax=c,T._YResMin=u,T._YResMax=_,T._AlphaMin=void 0!=d?d:1,T._AlphaMax=void 0!=m?m:1,T._AlphaResMin=void 0!=f?f:1,T._AlphaResMax=void 0!=g?g:1,T._scaleXMin=void 0!=y?y:1,T._scaleXMax=void 0!=v?v:1,T._scaleXResMin=void 0!=M?M:1,T._scaleXResMax=void 0!=I?I:1,T._scaleYMin=void 0!=S?S:1,T._scaleYMax=void 0!=C?C:1,T._scaleYResMin=void 0!=G?G:1,T._scaleYResMax=void 0!=b?b:1,T._lastAddTime=egret.getTimer(),T._itemArr=[],T.addEventListener(egret.Event.ENTER_FRAME,T.onEnterFrame,T),T}return __extends(i,e),i.prototype.onEnterFrame=function(t){if(!this._pause){var e=egret.getTimer();this.add(e),this.update(e)}},i.prototype.add=function(e){if(!(this._itemArr.length>=this._Max||e-this._lastAddTime<this._interval)){var i=this._lifeMin+Math.floor(Math.random()*(this._lifeMax-this._lifeMin)+.5),n=this._xMin+Math.floor(Math.random()*(this._xMax-this._xMin)+.5),o=this._YMin+Math.floor(Math.random()*(this._YMax-this._YMin)+.5),r=n+this._xResMin+Math.floor(Math.random()*(this._xResMax-this._xResMin)+.5),a=o+this._YResMin+Math.floor(Math.random()*(this._YResMax-this._YResMin)+.5),s=this._AlphaMin+Math.random()*(this._AlphaMax-this._AlphaMin),h=this._AlphaResMin+Math.random()*(this._AlphaResMax-this._AlphaResMin),l=this._scaleXMin+Math.random()*(this._scaleXMax-this._scaleXMin),p=this._scaleYMin+Math.random()*(this._scaleYMax-this._scaleYMin),c=this._scaleXResMin+Math.random()*(this._scaleXResMax-this._scaleXResMin),u=this._scaleYResMin+Math.random()*(this._scaleYResMax-this._scaleYResMin),_=(r-n)/i,d=(a-o)/i,m=h==s?0:(h-s)/i,f=c==l?0:(c-l)/i,g=u==p?0:(u-p)/i,y=new t.MParticleData(this._texture,i,_,d,m,f,g);y.init(n,o,s,l,p),this.addChild(y.bitMap),this._itemArr.push(y)}},i.prototype.update=function(t){for(var e=this._itemArr.length-1;e>=0;e--){var i=this._itemArr[e];0==i.update(t)&&(i.clean(),this._itemArr.splice(e,1))}},i.prototype.setPause=function(t){this._pause=t},Object.defineProperty(i.prototype,"pause",{get:function(){return this._pause},enumerable:!0,configurable:!0}),i.prototype.clear=function(){this.setPause(!0),this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this);for(var t=this._itemArr.length-1;t>=0;t--)this._itemArr[t].clean();this._itemArr.splice(0,this._itemArr.length),void 0!=this.parent&&this.parent.removeChild(this)},i}(egret.Sprite);t.GParticle=e,__reflect(e.prototype,"MDisplay.GParticle")}(MDisplay||(MDisplay={}));var GUIManager=function(t){function e(){var e=t.call(this)||this;return e._mUIBg=new egret.DisplayObjectContainer,e._mUITop=new egret.DisplayObjectContainer,e._mUITips=new egret.DisplayObjectContainer,e._mUIMost=new egret.DisplayObjectContainer,e.addChild(e._mUIBg),e.addChild(e._mUITop),e.addChild(e._mUITips),e.addChild(e._mUIMost),e}return __extends(e,t),Object.defineProperty(e,"getInstance",{get:function(){return void 0==e._mInstance&&(e._mInstance=new e),e._mInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgLay",{get:function(){return this._mUIBg},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLay",{get:function(){return this._mUITop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tipLay",{get:function(){return this._mUITips},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mostLay",{get:function(){return this._mUIMost},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(GUIManager.prototype,"GUIManager");var GWebUi=function(t){function e(){var e=t.call(this)||this;return e._contents=new Array,e._url="",e._contentsBox=new egret.Sprite,e._scollView=new egret.ScrollView,e._scollView.setContent(e._contentsBox),e._scollView.bounces=!0,e._scollView.verticalScrollPolicy="on",e._scollView.horizontalScrollPolicy="off",e._scollView.scrollSpeed=0,e.addChild(e._scollView),e}return __extends(e,t),Object.defineProperty(e,"getInstance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.show=function(t,i,n,o){void 0===o&&(o=20),this.clean(),e.UIWidth=i,e.UIHeight=n,this._fontSize=o,this._scollView.width=i,this._scollView.height=n,this._scollView.scrollTop=0,GResCache.loadResByUrl(t,this.onLoadPath,this,RES.ResourceItem.TYPE_TEXT)},e.prototype.hide=function(){void 0!=this.parent&&this.parent.removeChild(this),this.clean()},e.prototype.onLoadPath=function(t){null!=t&&this.analysis(t)},e.prototype.analysis=function(t){for(var i=t.split(e._tagStart),n=0,o=i.length;o>n;n++)this.addList(i[n]);this.display(),this.update()},e.prototype.addList=function(t){var i=e._tagEnd.exec(t);if(!(null==i||i.length<1)){var n=e._num.exec(i[0]);if(!(null==i||i.length<1)){var o=n[0],r=t.replace(e._tagEnd,"");this._contents.push([o,r])}}},e.prototype.display=function(){for(var t=0,i=this._contents.length;i>t;t++){var n=this._contents[t];if(n[0]==e.type_text){var o=new egret.TextField;o.width=e.UIWidth,o.text=n[1].replace(e._newLine,"\n"),o.size=this._fontSize,o.textColor=0,o.lineSpacing=e._lineSpacing,this._contentsBox.addChild(o),this._contents[t][2]=o}else if(n[0]==e.type_image){var r=new egret.Bitmap;this._contentsBox.addChild(r),this._contents[t][2]=r,GResCache.loadResByUrl(this._contents[t][1],this.onImageLoaded,this)}}},e.prototype.onImageLoaded=function(t){for(var e=0,i=this._contents.length;i>e;e++){var n=this._contents[e];if(n[2]instanceof egret.Bitmap){var o=n[2];if(null!=o.$bitmapData)continue;var r=GResCache.getEgretRes(n[1]);null!=r&&o.$setBitmapData(r)}}this.update()},e.prototype.update=function(){for(var t=0,i=0,n=this._contents.length;n>i;i++){var o=this._contents[i];if(o[2]instanceof egret.TextField)o[2].y=t,t+=o[2].textHeight+e._lineSpacing;else if(o[2]instanceof egret.Bitmap){var r=o[2];if(null==r.$bitmapData)continue;r.y=t,t+=o[2].height+e._lineSpacing}}},e.prototype.clean=function(){this._contentsBox.removeChildren();for(var t=0,e=this._contents.length;e>t;t++){var i=this._contents[t];i[2]instanceof egret.Bitmap&&(i[2].$bitmapData=null,GResCache["delete"](i[1]))}this._contents=[]},e.type_text=1,e.type_image=2,e.UIWidth=680,e.UIHeight=960,e._lineSpacing=5,e._tagStart=/<tag_\d{1}>/,e._tagEnd=/<\/tag_\d{1}>\s*/,e._num=/\d{1}/,e._newLine=/<br>/g,e._instance=null,e}(egret.Sprite);__reflect(GWebUi.prototype,"GWebUi");var MDisplay;!function(t){var e=function(){function t(){}return t}();t.MDisplay=e,__reflect(e.prototype,"MDisplay.MDisplay")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(){function t(t,e,i,n,o,r,a,s,h,l,p){void 0===l&&(l=1),this.mImagePath=t,this.mBlendName=e,this.mRotation=i,this.mScaleX=n,this.mScaleY=o,this.mX=r,this.mY=a,this.mSkewX=s,this.mSkewY=h,this.mAlpha=l,this.mName=p}return t}();t.MDisplayConfig=e,__reflect(e.prototype,"MDisplay.MDisplayConfig")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(){function t(t,e){this._mDisplays=new Array,this._mIndex=t,this._mEventStr=e}return t.prototype.MaddDisplay=function(t){this._mDisplays.push(t)},Object.defineProperty(t.prototype,"displays",{get:function(){return this._mDisplays},enumerable:!0,configurable:!0}),t}();t.MFramData=e,__reflect(e.prototype,"MDisplay.MFramData")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mCurrentFramIndex=1,e._mStartFrameIndex=0,e._mEndFrameIndex=0,e._mIsLoop=!0,e._mAutoClean=!1,e._mIsPause=!0,e}return __extends(e,t),e.prototype.MsetConfigData=function(t,e,i,n,o){this._mConfigData=t,this._mTotalFrames=t.mFrameTotal,this._mIsPause=!1,this.GgoToAndPlay(e,i,n,o),GMovieMag.getInstance.Madd2EnterFrame(this)},e.prototype.GgoToAndPlay=function(t,e,i,n){this._mStartFrameIndex=void 0==t?0:t,this._mEndFrameIndex=void 0==e?0:e,this._mIsLoop=void 0==i?!0:i,this._mAutoClean=void 0==n?!1:n,this._mIsPause=!1,this._mCurrentFramIndex=0==this._mStartFrameIndex?1:this._mStartFrameIndex},e.prototype.GPause=function(){this._mConfigData.mIsInit&&(this._mIsPause=!0)},e.prototype.GPlay=function(){this._mConfigData.mIsInit&&(this._mIsPause=!1)},e.prototype.Mupdate=function(){if(0!=this._mConfigData.mIsInit&&!this._mIsPause){var t=this._mConfigData.GgetFrameData(this._mCurrentFramIndex);if(null!=t){for(var e=t.displays,i=this.numChildren,n=0,o=e.length;o>n;n++){var r=e[n],a=void 0;a=i>n?this.getChildAt(n):new egret.Bitmap,a.$setBitmapData(GResCache.getRes(r.mImagePath,RES.ResourceItem.TYPE_IMAGE)),a.x=r.mX,a.y=r.mY,a.scaleX=r.mScaleX,a.scaleY=r.mScaleY,a.name=r.mName,r.mSkewX!=r.mSkewY?(a.skewX=r.mSkewX,a.skewY=r.mSkewY,a.rotation=0):(a.rotation=r.mRotation,a.skewX=0,a.skewY=0),a.alpha=r.mAlpha,n>=i&&this.addChild(a)}for(this.hasEventListener(GMovieClipEvent.playing)&&this.dispatchEventWith(GMovieClipEvent.playing,!1,this);this.numChildren>e.length;)this.removeChildAt(this.numChildren-1);this.updateFrameIndex()}}},e.prototype.updateFrameIndex=function(){var t=0==this._mEndFrameIndex?this._mConfigData.mFrameTotal:this._mEndFrameIndex,e=0==this._mStartFrameIndex?1:this._mStartFrameIndex;this._mCurrentFramIndex>=t?this._mIsLoop?this._mCurrentFramIndex=e:(this._mIsPause=!0,this.dispatchEventWith(GMovieClipEvent.played,!1,this),this._mAutoClean&&GObjPool.getInstance.Gadd2Pool(this)):this._mCurrentFramIndex++},e.prototype.clean=function(){GMovieMag.getInstance.MremoveEnterFrame(this),null!=this.parent&&this.parent.removeChild(this),this.removeChildren(),this.x=0,this.y=0,this.anchorOffsetX=0,this.anchorOffsetY=0,this.scaleX=1,this.scaleY=1,this.alpha=1},Object.defineProperty(e.prototype,"mTotalFrames",{get:function(){return this._mTotalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mCurrentFramIndex",{get:function(){return this._mCurrentFramIndex},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);t.MMovieClip=e,__reflect(e.prototype,"MDisplay.MMovieClip",["GIObjPool"])}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(){function e(){this.mIsInit=!1,this._mIsLoading=!1,this.framesArr={},this._mLoader=new GLoadModule}return e.prototype.MloadConfig=function(t){if(!this.mIsInit&&!this._mIsLoading){this._mIsLoading=!0;var i=t+".json";this._mLoader.GaddGroupRes(i,GLoadModule.GroupType_Flash)&&(this.mURL=e.configFileBaseUrl+i,this._mLoader.Gbegin(this.onLoadedImage,this))}},e.prototype.onLoadedImage=function(){var t=GResCache.getRes(this.mURL);this.handleData(t),this.mIsInit=!0},e.prototype.handleData=function(i){var n=i.imageArr,o=i.frames;this.mFrameTotal=o.length;for(var r=0,a=o.length;a>r;r++){for(var s=o[r],h=new t.MFramData(s.index,s.eventStr),l=0,p=s.list.length;p>l;l++){var c=s.list[l];h.MaddDisplay(new t.MDisplayConfig(e.imageFileBaseUrl+n[c[0]],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10]))}this.framesArr[s.index]=h}},e.prototype.GgetFrameData=function(t){var e=this.framesArr[t];return void 0==e?null:e},e.configFileBaseUrl="resource/assets/flashconfig/",e.imageFileBaseUrl="resource/assets/images/flash/",e}();t.MMovieClipData=e,__reflect(e.prototype,"MDisplay.MMovieClipData")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(){function t(t,e,i,n,o,r,a){this._startTime=this._lastTime=egret.getTimer(),this._bitMap=new egret.Bitmap,this._bitMap.$setBitmapData(t),this._lifeTime=e,this._XStep=i,this._YStep=n,this._AlphaStep=o,this._scaleXStep=r,this._scaleYStep=a}return t.prototype.init=function(t,e,i,n,o){this._bitMap.x=t,this._bitMap.y=e,this._bitMap.alpha=i,this._bitMap.scaleX=n,this._bitMap.scaleY=o},Object.defineProperty(t.prototype,"bitMap",{get:function(){return this._bitMap},enumerable:!0,configurable:!0}),t.prototype.update=function(t){if(t-this._startTime>this._lifeTime)return!1;var e=t-this._lastTime;return this._bitMap.x+=this._XStep*e,this._bitMap.y+=this._YStep*e,this._bitMap.alpha+=this._AlphaStep*e,this._bitMap.scaleX+=this._scaleXStep*e,this._bitMap.scaleY+=this._scaleYStep*e,this._lastTime=t,!0},t.prototype.clean=function(){this._bitMap.$setBitmapData(null),void 0!=this._bitMap.parent&&this._bitMap.parent.removeChild(this._bitMap)},t}();t.MParticleData=e,__reflect(e.prototype,"MDisplay.MParticleData")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(t){function e(e,i){var n=t.call(this,e)||this;return n._isAutoZoon=!0,n._touchBeginFun=void 0,n._touchBeginThisObj=void 0,n._isSetZoon=!1,void 0!=i&&(n._isAutoZoon=i),n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onClick,n),n.addEventListener(egret.TouchEvent.TOUCH_END,n.touchEnd,n),n.touchEnabled=!0,n}return __extends(e,t),e.prototype.addTouchBeginEvent=function(t,e){this._touchBeginFun=t,this._touchBeginThisObj=e},e.prototype.touchEnd=function(t){t.currentTarget==this&&(this._isAutoZoon?e.upstep(this,this._touchBeginFun,this._touchBeginThisObj,t):void 0!=this._touchBeginFun&&void 0!=this._touchBeginThisObj&&this._touchBeginFun.call(this._touchBeginThisObj,t)),t.stopImmediatePropagation},e.prototype.onClick=function(t){t.currentTarget==this&&(this._isAutoZoon?e.minify(this):this._touchBeginFun.call(this._touchBeginThisObj,t)),t.stopImmediatePropagation},e.setZoom=function(t){var e=Math.floor(t.width/2+.5);if(0==t.$anchorOffsetX){var i=Math.floor(t.height/2+.5);t.anchorOffsetX=e,t.anchorOffsetY=i,t.x+=t.anchorOffsetX,t.y+=t.$anchorOffsetY}},e.minify=function(t){e.setZoom(t),egret.Tween.get(t).to({scaleX:.9,scaleY:.9},80)},e.upstep=function(t,i,n,o){e.setZoom(t),egret.Tween.get(t).to({scaleX:1.1,scaleY:1.1},110).to({scaleX:1,scaleY:1},100).call(function(){void 0!=i&&void 0!=n&&(void 0!=o?i.call(n,o):i.call(n))},n)},e}(egret.Bitmap);t.GButton=e,__reflect(e.prototype,"MDisplay.GButton")}(MDisplay||(MDisplay={}));var MDisplay;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._mLoading=!1,e._mActionShow=!1,e._mActionHide=!1,e._mShowLoadUI=!1,e._mIsOpenMask=!1,e._mUiMask=null,e._mMaskAlpha=.7,e._mShowParent=null,e._mTweenFinish=!0,e}return __extends(e,t),e.prototype.GWndConfig=function(t,e,n,o,r){void 0===r&&(r=!1),this._mWndName=t,this._mShowParent=e,this._mPater=e,this._mShowType=void 0==n?i.NONE:n,this._mShowLoadUI=void 0==o?!1:o,this._mIsOpenMask=r},e.prototype.loadWndRes=function(){t.prototype.GinitUIConfig.call(this,this._mWndName)},e.prototype.onInit=function(){t.prototype.onInit.call(this),this._mLoading=!1,this._mInit=!0,this._mShowLoadUI&&this.hideLoadingUI(),this.addZH(),this.actionShow()},e.prototype.show=function(){if(0!=this._mTweenFinish){if(this._mTweenFinish=!1,0==this._mInit)return this._mShowLoadUI&&this.showLoadingUI(),this._mLoading=!0,void this.loadWndRes();this.addZH(),this.actionShow()}},e.prototype.addZH=function(){this._mIsOpenMask&&void 0==this._mUiMask&&(this._mUiMask=new egret.Bitmap(GResCache.getRes("resource/assets/images/ui/heise.png")),this._mUiMask.width=GUIManager.getInstance.stage.stageWidth,this._mUiMask.height=GUIManager.getInstance.stage.stageHeight,this._mUiMask.touchEnabled=!0,this.setMaskAlpha(this._mMaskAlpha))},e.prototype.setMaskAlpha=function(t){var e=this;null!=e._mUiMask&&(e._mMaskAlpha=t>0?t>1?1:t:0,e._mUiMask.alpha=e._mMaskAlpha)},e.prototype.actionShow=function(){if(!this._mLoading){null!=this._mPater&&0==this._mPater.contains(this)&&(this._mUiMask&&!this._mUiMask.parent&&this._mShowParent.addChild(this._mUiMask),this._mPater.addChild(this)),egret.Tween.removeTweens(this);var t;switch(this._mShowType){case i.ALPHA:this._mActionShow=!0,this.alpha=.1,t=egret.Tween.get(this),t.to({alpha:1},300),t.call(this.endShow,this);break;case i.DROP:this._mActionShow=!0;var e=this.y;this.y=-this.height,t=egret.Tween.get(this),t.to({y:e},250,egret.Ease.backIn),t.call(this.endShow,this);break;case i.SCALE:this._mActionShow=!0,this.anchorOffsetX=.5*this.width,this.anchorOffsetY=.5*this.height,this.scaleX=.1,this.scaleY=.1,t=egret.Tween.get(this),t.to({scaleX:1,scaleY:1},300,egret.Ease.getBackInOut(1)),t.call(this.endShow,this);break;default:t=egret.Tween.get(this),t.wait(80),t.call(this.endShow,this)}}},e.prototype.endShow=function(){this._mActionShow=!1,this.onShow(),this.addEvent()},e.prototype.removeChildMask=function(){this._mUiMask&&this._mUiMask.parent&&this._mUiMask.parent.removeChild(this._mUiMask)},e.prototype.endHide=function(){this._mTweenFinish=!0,this._mActionHide=!1,null!=this.parent&&this.parent.removeChild(this),this.removeEvent(),this.onHide()},e.prototype.hide=function(){if(!this._mActionHide&&this._mInit){egret.Tween.removeTweens(this);var t;switch(this._mShowType){case i.SCALE:this._mActionHide=!0,this.scaleX=1,this.scaleY=1,t=egret.Tween.get(this),t.to({scaleX:.1,scaleY:.1},200),t.call(this.endHide,this);break;case i.DROP:case i.ALPHA:this._mActionHide=!0,this.alpha=1,t=egret.Tween.get(this),t.to({alpha:.1},300),t.call(this.endHide,this);break;default:this.endHide()}this.removeChildMask()}},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.onShow=function(){},e.prototype.onHide=function(){},Object.defineProperty(e.prototype,"getZZ",{get:function(){return this._mUiMask},enumerable:!0,configurable:!0}),e.prototype.showLoadingUI=function(){n.getInstance.show()},e.prototype.hideLoadingUI=function(){n.getInstance.hide()},e}(t.MUISprite);t.MUIWnd=e,__reflect(e.prototype,"MDisplay.MUIWnd");var i;!function(t){t[t.NONE=0]="NONE",t[t.DROP=1]="DROP",t[t.SCALE=2]="SCALE",t[t.ALPHA=3]="ALPHA"}(i=t.WndShowType||(t.WndShowType={}));var n=function(t){function e(){var e=t.call(this)||this;return e._mLoadingBmp=new egret.Bitmap,e}return __extends(e,t),Object.defineProperty(e,"getInstance",{get:function(){return void 0==e._mInstance&&(e._mInstance=new e),e._mInstance},enumerable:!0,configurable:!0}),e.prototype.show=function(){void 0==this._mLoadingBmp.$bitmapData&&(this._mLoadingBmp.$bitmapData=GResCache.getRes("resource/assets/egret_icon.png")),GUIManager.getInstance.topLay.addChild(this._mLoadingBmp),null!=this.stage&&(this._mLoadingBmp.x=.5*(this.stage.stageWidth-this._mLoadingBmp.width),this._mLoadingBmp.y=.5*(this.stage.stageHeight-this._mLoadingBmp.height))},e.prototype.hide=function(){null!=this._mLoadingBmp.parent&&this._mLoadingBmp.parent.removeChild(this._mLoadingBmp)},e}(t.MUISprite);t.MLoadingUI=n,__reflect(n.prototype,"MDisplay.MLoadingUI")}(MDisplay||(MDisplay={}));var GHttpMager=function(){function t(){this._mSendingMap={}}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.GaddHttpSend=function(t,e,i,n,o,r,a){void 0===o&&(o=null),void 0===r&&(r=egret.HttpMethod.GET),void 0===a&&(a=egret.HttpResponseType.TEXT);var s=new egret.HttpRequest;s.responseType=a,t=r==egret.HttpMethod.GET?t+"?"+e:t,s.open(t,r),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._mSendingMap[s.hashCode]={cf:i,to:n,d:o},r==egret.HttpMethod.GET?s.send():s.send(e),s.addEventListener(egret.Event.COMPLETE,this.onHttpComplete,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onHttpError,this)},t.prototype.onHttpComplete=function(t){this.callFun(t.currentTarget,!0)},t.prototype.onHttpError=function(t){this.callFun(t.currentTarget,!1)},t.prototype.callFun=function(t,e){var i=this._mSendingMap[t.hashCode];if(void 0!=i){var n=i.cf;void 0!=n&&void 0!=i.to&&n.call(i.to,e,t,i.d),delete this._mSendingMap[t.hashCode]}},t}();__reflect(GHttpMager.prototype,"GHttpMager");var MDisplay;!function(t){var e=function(t){function e(e,i){var n=t.call(this)||this;return n.setRec(e,i),n}return __extends(e,t),e.prototype.setRec=function(t,e){this._width=t,this._height=e,this.graphics.clear(),this.graphics.beginFill(16777215,1),this.graphics.drawRect(0,0,this._width,this._height),this.graphics.endFill()},e}(egret.Shape);t.GMaskObj=e,__reflect(e.prototype,"MDisplay.GMaskObj")}(MDisplay||(MDisplay={}));var MNet;!function(t){var e=function(){function t(t,e){this._mUrl=t,this._mHandle=e,this._mCacheArr=new Array,this.connect()}return t.prototype.sendByteArray=function(t){this._mCacheArr.push(t),0==this.checkSocket()?this._mHandle.closeCall():this.write2Socket()},t.prototype.write2Socket=function(){for(;this.checkSocket()&&this._mCacheArr.length>0;){var t=this._mCacheArr.shift();this._mSocket.writeBytes(t),this._mSocket.flush()}},t.prototype.checkSocket=function(){return void 0==this._mSocket||this._mSocket.connected===!1?!1:!0},t.prototype.connect=function(){void 0==this._mSocket&&(this._mSocket=new egret.WebSocket,this._mSocket.type=egret.WebSocket.TYPE_BINARY,0==this._mSocket.hasEventListener(egret.Event.CONNECT)&&(this._mSocket.addEventListener(egret.Event.CONNECT,this.onComplete,this),this._mSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._mSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onData,this),this._mSocket.addEventListener(egret.Event.CLOSE,this.onClose,this))),this._mSocket.connected===!1&&this._mSocket.connectByUrl(this._mUrl)},t.prototype.onClose=function(t){egret.log("---------socket主动断开了-----------"),this._mHandle.closeCall()},t.prototype.onComplete=function(t){egret.log("成功连接服务器:"+this._mUrl),this._mHandle.completeCall()},t.prototype.onError=function(t){egret.log("---------socket连接服务器IO错误------------")},t.prototype.onData=function(t){var e=new egret.ByteArray;this._mSocket.readBytes(e),this._mHandle.handlePro(e)},t.prototype.closeSocket=function(){this._mSocket.close},t.prototype.connectSocket=function(){this.connect()},t.prototype.cleanCacheArr=function(){this._mCacheArr.splice(0,this._mCacheArr.length)},t}();t.MSocketer=e,__reflect(e.prototype,"MNet.MSocketer")}(MNet||(MNet={}));var GLoadModule=function(){function t(){this._mLoadArr=new Array,this._mLoadSheetArr=new Array}return t.prototype.GaddItem=function(t){null==GResCache.getRes(t)&&this._mLoadArr.push(t)},t.prototype.GaddGroupRes=function(e,i){if(void 0!=i&&i==t.GroupType_SheetFlash)this._mLoadSheetArr.push(GSheet.pathSheetFlash+e);else if(void 0!=i&&i==t.GroupType_SheetUI)this._mLoadSheetArr.push(GSheet.pathSheetUI+e);else{var n=GResCache.getResGroupConfig(e);if(null==n)return egret.error("加载组资源时出错 不存在对应命名的配置:"+e),!1;for(var o=n.images,r=n.base,a=0,s=o;a<s.length;a++){var h=s[a];this.GaddItem(r+h)}i==t.GroupType_UI?this.GaddItem(MDisplay.MUISprite.UIConfigUrl+e):i==t.GroupType_Flash&&this.GaddItem(MDisplay.MMovieClipData.configFileBaseUrl+e)}return!0},t.prototype.removeItem=function(t){var e=this._mLoadArr.indexOf(t);e>-1&&this._mLoadArr.splice(e,1)},t.prototype.removeSheetItem=function(e){e=e.replace(t.loadBaseUrl,"");var i=this._mLoadSheetArr.indexOf(e);i>-1&&this._mLoadSheetArr.splice(i,1)},t.prototype.Gbegin=function(t,e){return this._mCallBackFun=t,this._mThisObj=e,this._mLoadTotal=this._mLoadArr.length+this._mLoadSheetArr.length,0==this._mLoadTotal?void this._mCallBackFun.call(this._mThisObj):void this.loadSheet()},t.prototype.loadSheet=function(){for(var t=0,e=0,i=this._mLoadSheetArr;e<i.length;e++){var n=i[e];GSheet.getInstance().getResByUrl(n,this.onLoadSheet,this),t++}0==t&&this.checkIsEndSheet()},t.prototype.onLoadSheet=function(t,e){if(void 0!=t){if(e.indexOf("flash")>=0)for(var i in t._textureMap)GSheet.getInstance().saveFlash(i,t._textureMap[i]);if(e.indexOf("ui")>=0)for(var i in t._textureMap)GSheet.getInstance().saveUi(i,t._textureMap[i]);this.removeSheetItem(e),this.checkIsEndSheet()}},t.prototype.checkIsEndSheet=function(){this._mLoadSheetArr.length<=0&&void 0!==this._mCallBackFun&&this.loadOrdinary()},t.prototype.loadOrdinary=function(){for(var t,e=0,i=this._mLoadArr.length-1;i>=0;i--)t=this._mLoadArr[i],null!=GResCache.getRes(t)?this.removeItem(t):(GResCache.loadResByUrl(t,this.onLoaded,this),e++);0==e&&this.checkIsEnd()},t.prototype.onLoaded=function(e,i){void 0!=e&&(i=i.replace(t.loadBaseUrl,""),this.removeItem(i),this.checkIsEnd())},t.prototype.checkIsEnd=function(){this._mLoadArr.length<=0&&void 0!==this._mCallBackFun&&(this._mLoadTotal=0,this._mCallBackFun.call(this._mThisObj))},Object.defineProperty(t.prototype,"loadTotal",{get:function(){return this._mLoadTotal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadOverplus",{get:function(){return this._mLoadArr.length+this._mLoadSheetArr.length},enumerable:!0,configurable:!0}),t.GroupType_UI="GroupLoadType_UI",t.GroupType_Flash="GroupLoadType_Flash",t.GroupType_SheetFlash="GroupLoadType_SheetFlash",t.GroupType_SheetUI="GroupLoadType_SheetUI",t.loadBaseUrl="",t}();__reflect(GLoadModule.prototype,"GLoadModule");var GResCache=function(){function t(){}return t.init=function(){t._mInit===!1&&(t._mInit=!0,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,t.onLoadError,null))},t.getResGroupConfig=function(e){return void 0==t.mResGroupConfig||void 0==t.mResGroupConfig[e]?null:t.mResGroupConfig[e]},t.onLoadError=function(t){egret.error("加载资源出错:"+t.resItem.name)},t.loadResByUrl=function(e,i,n,o){return t.init(),void 0==o&&(o=t._mTypeConfig[e]?t._mTypeConfig[e]:t.getTypeByUrl(e)),""==o?void egret.error("加载资源:"+e+"类型有误"):(t.mIsDeBug&&egret.log("请求加载游戏资源:"+e),t._mTypeConfig[e]=o,void RES.getResByUrl(GLoadModule.loadBaseUrl+e,i,n,o))},t["delete"]=function(e){RES.destroyRes(e),delete t._mTypeConfig[e]},t.getRes=function(e,i){e=e.replace(GLoadModule.loadBaseUrl,"");var n=GSheet.getInstance().getRes(e);return void 0!=n?n:t._mTypeConfig[e]?(void 0==i&&(i=t._mTypeConfig[e]),this.getEgretRes(e,i)):null},t.getEgretRes=function(t,e){void 0==e&&(e=this.getTypeByUrl(t));var i=RES.getAnalyzer(e),n=i.getRes(t);return void 0!=n?n:i.getRes(GLoadModule.loadBaseUrl+t)},t.getTypeByUrl=function(t){var e=t.lastIndexOf(".");if(-1==e)return"";var i=t.slice(e+1);return"json"==i?RES.ResourceItem.TYPE_JSON:"png"==i||"jpg"==i?RES.ResourceItem.TYPE_IMAGE:"fnt"==i?RES.ResourceItem.TYPE_FONT:"mp3"==i||"wav"==i?RES.ResourceItem.TYPE_SOUND:""},t._mTypeConfig={},t._mInit=!1,t.mIsDeBug=!0,t}();__reflect(GResCache.prototype,"GResCache");var GSheet=function(){function t(){RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onLoadError,null),this.flashMap=new GHashMap,this.uiMap=new GHashMap}return t.getInstance=function(){return null==t._mInstance&&(t._mInstance=new t),t._mInstance},t.prototype.saveFlash=function(t,e){this.flashMap.Gput(t,e)},t.prototype.saveUi=function(t,e){this.uiMap.Gput(t,e)},t.prototype.onLoadError=function(t){egret.error("加载大图出错:"+t.resItem.name)},t.prototype.getResByUrl=function(t,e,i,n){GResCache.mIsDeBug&&egret.log("请求加载游戏资源:"+t),RES.getResByUrl(GLoadModule.loadBaseUrl+t,e,i,RES.ResourceItem.TYPE_SHEET)},t.prototype.getRes=function(t){var e=t.lastIndexOf("/"),i=t.slice(e+1).split(".")[0];return-1==e?null:t.indexOf("flash")>=0&&this.flashMap.GhasKey(i)?this.flashMap.Gget(i):this.uiMap.GhasKey(i)?this.uiMap.Gget(i):null},t._mInstance=null,t.pathSheetFlash="resource/assets/images/sheet/flash/",t.pathSheetUI="resource/assets/images/sheet/ui/",t}();__reflect(GSheet.prototype,"GSheet");var Base64=function(){function t(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.encode=function(t){var e,i,n,o,r,a,s,h="",l=0;for(t=this.utf8_encode(t);l<t.length;)e=t.charCodeAt(l++),i=t.charCodeAt(l++),n=t.charCodeAt(l++),o=e>>2,r=(3&e)<<4|i>>4,a=(15&i)<<2|n>>6,s=63&n,isNaN(i)?a=s=64:isNaN(n)&&(s=64),h=h+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return h},t.prototype.decode=function(t){var e,i,n,o,r,a,s,h="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)o=this._keyStr.indexOf(t.charAt(l++)),r=this._keyStr.indexOf(t.charAt(l++)),a=this._keyStr.indexOf(t.charAt(l++)),s=this._keyStr.indexOf(t.charAt(l++)),e=o<<2|r>>4,i=(15&r)<<4|a>>2,n=(3&a)<<6|s,h+=String.fromCharCode(e),64!=a&&(h+=String.fromCharCode(i)),64!=s&&(h+=String.fromCharCode(n));return h=this.utf8_decode(h)},t.prototype.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},t.prototype.utf8_decode=function(t){var e,i,n,o="",r=0;
for(e=i=n=0;r<t.length;)if(e=t.charCodeAt(r),128>e)o+=String.fromCharCode(e),r++;else if(e>191&&224>e)n=t.charCodeAt(r+1),o+=String.fromCharCode((31&e)<<6|63&n),r+=2;else{n=t.charCodeAt(r+1);var a=t.charCodeAt(r+2);o+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&a),r+=3}return o},t}();__reflect(Base64.prototype,"Base64");var BigNumber=function(){function t(){}return Object.defineProperty(t,"zero",{get:function(){var e=new t;return e.init(0,1),e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ten",{get:function(){return null!=t._ten?t._ten:(t._ten=new t,t._ten.init(10,2),t._ten)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"max",{get:function(){return null!=t._max?t._max:(t._max=new t,t._max.init(999999999,1e3),t._max)},enumerable:!0,configurable:!0}),t.getBigNum=function(e,i){if(0>=i)return t.zero;var n=new t;return n.init(e,i),n},t.getBigNumByStr=function(e){var i=new t;return i.initByStr(e),i},t.prototype.init=function(t,e){this._value=Math.floor(t),this._len=e},t.prototype.initByStr=function(t){this._len=t.length,this._len<=9?this._value=Number(t):this._value=Number(t.slice(0,9))},t.prototype.compareTo=function(t){return this._len==t._len&&this._value==t._value?0:this._len>t._len||this._len==t._len&&this._value>t._value?1:-1},t.prototype.write=function(t){this._value=t._value,this._len=t._len},t.prototype.clone=function(){var e=new t;return e._value=this._value,e._len=this._len,e},t.prototype.add=function(e){-1==this.compareTo(e)&&(t._temp.write(this),this.write(e),e=t._temp);var i=this._len,n=this._value;if(this._len<=9&&e._len<=9||this._len==e._len)this._value+=e._value,this.repair(i,n);else{if(this._len>=e._len+9)return;if(this._len<=e._len-9)return this._len=e._len,void(this._value=e._value);var o=Math.abs(i-this._value.toString().length-(e._len-e._value.toString().length)),r=this._value,a=e._value;i>e._len?a=e._value/Math.pow(10,o):r=this._value/Math.pow(10,o),this._value=r+a,this.repair(i,n)}},t.prototype.sub=function(t){if(this.compareTo(t)<=0)return this._len=1,void(this._value=0);if(!(this._len-t._len>=9)){var e=this._len,i=this._value,n=this._len-this._value.toString().length-(t._len-t._value.toString().length),o=t._value;n>0&&(o=t._value/Math.pow(10,n)),this._value-=o,this.repair(e,i)}},t.prototype.mult=function(e){if(e.compareTo(t._zero)<=0)return this._len=1,void(this._value=0);var i=this._len,n=this._value;this._len+=e._len-Math.floor(e._value).toString().length,this._value=Math.floor(this._value*e._value),this.repair(i,n)},t.prototype.sqrt=function(){if(this._len<=9)return void this.initByStr(Math.floor(Math.sqrt(this._value)).toString());var t=this._len-9,e=!(t%2==0);t=(e?t-1:t)/2;var i=e?10*this._value:this._value;i=Math.sqrt(i);var n=Math.floor(i).toString().length;return 9-n>=t?(i*=Math.pow(10,t),void this.initByStr(Math.floor(i).toString())):(t-=9-n,i*=Math.pow(10,9-n),this.init(i,t+9),void 0)},t.prototype.multFromNum=function(e){e=Math.floor(e);var i=t._temp;e>999999999?i.initByStr(e.toString(10)):i.init(e,e.toString(10).length),this.mult(i)},t.prototype.divFromNum=function(e){e=Math.floor(e);var i=t._temp;e>999999999?i.initByStr(e.toString(10)):i.init(e,e.toString(10).length),this.div(i)},t.prototype.div=function(e){if(e.compareTo(t._zero)<=0)return void(this._len=this._value=0);var i=(this._len,this._value,this._len-this._value.toString(10).length-(e._len-e._value.toString(10).length)),n=this._value/e._value;if(1>n){var o=9>=i?i:9;n*=Math.pow(10,o),i-=o}else if(1e8>n&&i>0){var r=Math.floor(n).toString(10).length,o=9-r>=i?i:9-r;n*=Math.pow(10,o),i-=o}n=Math.floor(n),this._len=i+n.toString(10).length,this._value=n},t.pow=function(e,i){var n=t._powAddv,o=t._powRes;o.init(1,1),n.init(0,1),e>=t.powMaxNum&&egret.error("求次幂的原值不得大于999999999");for(var r=0,a=e;;){for(a=e,r++;i>r&&(a*=e,r++,!(a>=1e18)););if(n.initByStr(Math.floor(a).toString(10)),1==o._value)o.write(n);else{var s=Number(a.toFixed(7))-Math.floor(a);n._value+=s,o.mult(n)}if(r>=i)break}return o},t.prototype.repair=function(t,e){var i=this._value=Math.floor(this._value),n=Math.floor(e).toString().length,o=i.toString().length;this._len=this._len-(n-o),o>9&&(this._value=Number(i.toString().slice(0,9))),9>o&&this._len>=9&&(this._value=this._value*Math.pow(10,9-o));var r=this._value.toString().length;9>r&&r<this._len&&(this._value*=Math.pow(10,this._len-r))},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lenth",{get:function(){return this._len},enumerable:!0,configurable:!0}),t._ten=null,t._max=null,t._temp=t.zero,t._zero=t.zero,t.powMaxNum=999999999,t._powRes=t.zero,t._powAddv=t.zero,t}();__reflect(BigNumber.prototype,"BigNumber");var GBezier=function(){function t(){this._point=new egret.Point}return t.getBezier=function(){var e=GObjPool.getInstance.GgetObj(t);return null==e&&(e=new t),e},t.prototype.tween=function(t,e,i,n,o,r){this._point0=t,this._point1=e,this._point2=i,this._callFun=o,this.factor=0,egret.Tween.get(this).to({factor:1},n).call(function(){GObjPool.getInstance.Gadd2Pool(this)})},Object.defineProperty(t.prototype,"factor",{set:function(t){this._point.x=(1-t)*(1-t)*this._point0.x+2*t*(1-t)*this._point1.x+t*t*this._point2.x,this._point.y=(1-t)*(1-t)*this._point0.y+2*t*(1-t)*this._point2.y+t*t*this._point2.y,this._callFun.call(this._point)},enumerable:!0,configurable:!0}),t.prototype.clean=function(){egret.Tween.removeTweens(this),this._callFun=null},t}();__reflect(GBezier.prototype,"GBezier",["GIObjPool"]);var GHashMap=function(){function t(){this._mkeys=[]}return t.prototype.onAdd=function(t){void 0==this[t]&&this._mkeys.push(t)},t.prototype.onRemove=function(t){if(void 0!=this[t]){var e=this._mkeys.indexOf(t);e>-1&&this._mkeys.splice(e,1)}},t.prototype.Gput=function(t,e){void 0!=t&&(this.onAdd(t),this[t]=e)},t.prototype.GhasKey=function(t){return void 0!=this[t]},t.prototype.GhasValue=function(t){if(void 0==t)return!1;for(var e=0,i=this._mkeys;e<i.length;e++){var n=i[e];if(this[n]==t)return!0}return!1},t.prototype.GremoveByKey=function(t){if(0==this.GhasKey(t))return null;this.onRemove(t);var e=this[t];return delete this[t],e},t.prototype.GremoveByValue=function(t){if(void 0==t)return!1;for(var e=0,i=this._mkeys;e<i.length;e++){var n=i[e];if(this[n]==t)return this.GremoveByKey(n),!0}return!1},t.prototype.Gget=function(t){var e=this[t];return void 0==e?null:e},Object.defineProperty(t.prototype,"size",{get:function(){return this._mkeys.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return this._mkeys},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var t=this._mkeys,e=t.length,i=e-1;i>=0;i--)this.GremoveByKey(t[i])},t}();__reflect(GHashMap.prototype,"GHashMap");var GObjPool=function(){function t(){}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.Gadd2Pool=function(e){if(void 0!=e){var i=egret.getQualifiedClassName(e);if(0!=i.length){var n=this[i];if(void 0==n&&(n=new Array,this[i]=n),t.mIsCheck){var o=n.indexOf(e);if(o>-1)return void egret.error("重复向对象池插入相同对象实例 类型:"+i)}egret.is(e,"GIObjPool")&&e.clean(),n.push(e)}}},t.prototype.GgetObj=function(t){if(void 0==t)return null;var e=egret.getQualifiedClassName(t);if(0==e.length)return null;var i=this[e];return void 0==i||i.length<=0?null:i.pop()},t.GgetMCObj=function(){var e=t.getInstance.GgetObj(MDisplay.MMovieClip);return null==e&&(e=new MDisplay.MMovieClip),e},t.GgetBmObj=function(){var e=t.getInstance.GgetObj(egret.Bitmap);return null==e&&(e=new egret.Bitmap),e},t.GgetTimerTaskObj=function(){var e=t.getInstance.GgetObj(MUtils.MTimerTask);return null==e&&(e=new MUtils.MTimerTask),e},t.mIsCheck=!0,t}();__reflect(GObjPool.prototype,"GObjPool");var GTimerMag=function(){function t(){this._mLastTime=egret.getTimer(),this._mTaskMap=new GHashMap}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.addTimerTask=function(t,e,i,n,o){var r=GObjPool.GgetTimerTaskObj();r.Minit(t,e,i,n,o),this._mTaskMap.Gput(t,r)},t.prototype.GremoveTimerTask=function(t){var e=this._mTaskMap.GremoveByKey(t);void 0!=e&&GObjPool.getInstance.Gadd2Pool(e)},t.prototype.update=function(){this._mCurrTime=egret.getTimer();for(var t=this._mCurrTime-this._mLastTime,e=this._mTaskMap.keys,i=e.length-1;i>=0;i--){var n=this._mTaskMap.Gget(e[i]);void 0!=n&&n.Mupdate(t)}return this._mLastTime=this._mCurrTime,t},t.prototype.getCurrTime=function(){return this._mCurrTime},t}();__reflect(GTimerMag.prototype,"GTimerMag");var GTips=function(){function t(){}return t.confirm=function(t){return confirm(t)},t.alert=function(t){alert(t)},t}();__reflect(GTips.prototype,"GTips");var GUtil=function(){function t(){}return t.colorMatrixIsNormal=function(t){return void 0==t||8!=t.length?!1:1==t[0]&&0==t[1]&&1==t[2]&&0==t[3]&&1==t[4]&&0==t[5]&&1==t[6]&&0==t[7]?!0:!1},t.to20ColorMatrix=function(e){return 0==t.colorMatrixIsNormal(e)?null:void 0},t.getFileType=function(t){var e=t.lastIndexOf(".");if(-1==e)return"";var i=t.slice(e+1);return i},t.secondToDate=function(t){var e=Math.floor(t/3600),i=Math.floor(t/60%60),n=Math.floor(t%60);return(10>e?"0"+e:e.toString())+":"+(10>i?"0"+i:i.toString())+":"+(10>n?"0"+n:n.toString())},t.removeAllChildrens=function(t){for(var e,i=t.numChildren-1;i>=0;i--)e=t.getChildAt(i),e instanceof egret.DisplayObject&&null!=e.parent&&e.parent.removeChild(e),e instanceof egret.DisplayObjectContainer&&this.removeAllChildrens(e)},t.COLOR_FILTER_LIGHT=new egret.ColorMatrixFilter([1,0,0,0,50,0,1,0,0,50,0,0,1,0,50,0,0,0,1,0]),t.COLOR_FILTER_LIGHT3=new egret.ColorMatrixFilter([1,0,0,0,120,0,1,0,0,120,0,0,1,0,120,0,0,0,1,0]),t.COLOR_FILTER_DARK=new egret.ColorMatrixFilter([.3,0,0,0,0,0,.3,0,0,0,0,0,.3,0,0,0,0,0,1,0]),t.COLOR_FILTER_GRAY=new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0]),t}();__reflect(GUtil.prototype,"GUtil");var GUtilMath=function(){function t(){}return t.getDistance=function(t,e,i,n){var o=t-i,r=e-n;return Math.sqrt(o*o+r*r)},t.angle2Radian=function(t){return t*Math.PI/180},t.getAngle=function(t,e,i,n){return Math.atan2(n-t,i-e)},t.getLenByLine=function(e,i,n,o,r){var a=t.getAngle(n,o,e,n);return t.TempPoint.y=Math.sin(a)*r+i,t.TempPoint.x=Math.cos(a)*r+e,t.TempPoint},t.randomNum=function(t,e){var i=e-t+1;return Math.floor(Math.random()*i+t)},t.TempPoint=new egret.Point,t}();__reflect(GUtilMath.prototype,"GUtilMath");var MD5=function(){function t(){}return Object.defineProperty(t,"getInstance",{get:function(){return void 0==t._mInstance&&(t._mInstance=new t),t._mInstance},enumerable:!0,configurable:!0}),t.prototype.safe_add=function(t,e){var i=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(i>>16);return n<<16|65535&i},t.prototype.rol=function(t,e){return t<<e|t>>>32-e},t.prototype.cmn=function(t,e,i,n,o,r){return this.safe_add(this.rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,r)),o),i)},t.prototype.ff=function(t,e,i,n,o,r,a){return this.cmn(e&i|~e&n,t,e,o,r,a)},t.prototype.gg=function(t,e,i,n,o,r,a){return this.cmn(e&n|i&~n,t,e,o,r,a)},t.prototype.hh=function(t,e,i,n,o,r,a){return this.cmn(e^i^n,t,e,o,r,a)},t.prototype.ii=function(t,e,i,n,o,r,a){return this.cmn(i^(e|~n),t,e,o,r,a)},t.prototype.coreMD5=function(t){for(var e=1732584193,i=-271733879,n=-1732584194,o=271733878,r=0;r<t.length;r+=16){var a=e,s=i,h=n,l=o;e=this.ff(e,i,n,o,t[r+0],7,-680876936),o=this.ff(o,e,i,n,t[r+1],12,-389564586),n=this.ff(n,o,e,i,t[r+2],17,606105819),i=this.ff(i,n,o,e,t[r+3],22,-1044525330),e=this.ff(e,i,n,o,t[r+4],7,-176418897),o=this.ff(o,e,i,n,t[r+5],12,1200080426),n=this.ff(n,o,e,i,t[r+6],17,-1473231341),i=this.ff(i,n,o,e,t[r+7],22,-45705983),e=this.ff(e,i,n,o,t[r+8],7,1770035416),o=this.ff(o,e,i,n,t[r+9],12,-1958414417),n=this.ff(n,o,e,i,t[r+10],17,-42063),i=this.ff(i,n,o,e,t[r+11],22,-1990404162),e=this.ff(e,i,n,o,t[r+12],7,1804603682),o=this.ff(o,e,i,n,t[r+13],12,-40341101),n=this.ff(n,o,e,i,t[r+14],17,-1502002290),i=this.ff(i,n,o,e,t[r+15],22,1236535329),e=this.gg(e,i,n,o,t[r+1],5,-165796510),o=this.gg(o,e,i,n,t[r+6],9,-1069501632),n=this.gg(n,o,e,i,t[r+11],14,643717713),i=this.gg(i,n,o,e,t[r+0],20,-373897302),e=this.gg(e,i,n,o,t[r+5],5,-701558691),o=this.gg(o,e,i,n,t[r+10],9,38016083),n=this.gg(n,o,e,i,t[r+15],14,-660478335),i=this.gg(i,n,o,e,t[r+4],20,-405537848),e=this.gg(e,i,n,o,t[r+9],5,568446438),o=this.gg(o,e,i,n,t[r+14],9,-1019803690),n=this.gg(n,o,e,i,t[r+3],14,-187363961),i=this.gg(i,n,o,e,t[r+8],20,1163531501),e=this.gg(e,i,n,o,t[r+13],5,-1444681467),o=this.gg(o,e,i,n,t[r+2],9,-51403784),n=this.gg(n,o,e,i,t[r+7],14,1735328473),i=this.gg(i,n,o,e,t[r+12],20,-1926607734),e=this.hh(e,i,n,o,t[r+5],4,-378558),o=this.hh(o,e,i,n,t[r+8],11,-2022574463),n=this.hh(n,o,e,i,t[r+11],16,1839030562),i=this.hh(i,n,o,e,t[r+14],23,-35309556),e=this.hh(e,i,n,o,t[r+1],4,-1530992060),o=this.hh(o,e,i,n,t[r+4],11,1272893353),n=this.hh(n,o,e,i,t[r+7],16,-155497632),i=this.hh(i,n,o,e,t[r+10],23,-1094730640),e=this.hh(e,i,n,o,t[r+13],4,681279174),o=this.hh(o,e,i,n,t[r+0],11,-358537222),n=this.hh(n,o,e,i,t[r+3],16,-722521979),i=this.hh(i,n,o,e,t[r+6],23,76029189),e=this.hh(e,i,n,o,t[r+9],4,-640364487),o=this.hh(o,e,i,n,t[r+12],11,-421815835),n=this.hh(n,o,e,i,t[r+15],16,530742520),i=this.hh(i,n,o,e,t[r+2],23,-995338651),e=this.ii(e,i,n,o,t[r+0],6,-198630844),o=this.ii(o,e,i,n,t[r+7],10,1126891415),n=this.ii(n,o,e,i,t[r+14],15,-1416354905),i=this.ii(i,n,o,e,t[r+5],21,-57434055),e=this.ii(e,i,n,o,t[r+12],6,1700485571),o=this.ii(o,e,i,n,t[r+3],10,-1894986606),n=this.ii(n,o,e,i,t[r+10],15,-1051523),i=this.ii(i,n,o,e,t[r+1],21,-2054922799),e=this.ii(e,i,n,o,t[r+8],6,1873313359),o=this.ii(o,e,i,n,t[r+15],10,-30611744),n=this.ii(n,o,e,i,t[r+6],15,-1560198380),i=this.ii(i,n,o,e,t[r+13],21,1309151649),e=this.ii(e,i,n,o,t[r+4],6,-145523070),o=this.ii(o,e,i,n,t[r+11],10,-1120210379),n=this.ii(n,o,e,i,t[r+2],15,718787259),i=this.ii(i,n,o,e,t[r+9],21,-343485551),e=this.safe_add(e,a),i=this.safe_add(i,s),n=this.safe_add(n,h),o=this.safe_add(o,l)}return[e,i,n,o]},t.prototype.binl2hex=function(t){for(var e="0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return i},t.prototype.binl2b64=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",n=0;n<32*t.length;n+=6)i+=e.charAt(t[n>>5]<<n%32&63|t[n>>6]>>32-n%32&63);return i},t.prototype.str2binl=function(t){for(var e=(t.length+8>>6)+1,i=new Array(16*e),n=0;16*e>n;n++)i[n]=0;for(var n=0;n<t.length;n++)i[n>>2]|=(255&t.charCodeAt(n))<<n%4*8;return i[n>>2]|=128<<n%4*8,i[16*e-2]=8*t.length,i},t.prototype.strw2binl=function(t){for(var e=(t.length+4>>5)+1,i=new Array(16*e),n=0;16*e>n;n++)i[n]=0;for(var n=0;n<t.length;n++)i[n>>1]|=t.charCodeAt(n)<<n%2*16;return i[n>>1]|=128<<n%2*16,i[16*e-2]=16*t.length,i},t.prototype.hexMD5=function(t){return this.binl2hex(this.coreMD5(this.str2binl(t)))},t.prototype.hexMD5w=function(t){return this.binl2hex(this.coreMD5(this.strw2binl(t)))},t.prototype.b64MD5=function(t){return this.binl2b64(this.coreMD5(this.str2binl(t)))},t.prototype.b64MD5w=function(t){return this.binl2b64(this.coreMD5(this.strw2binl(t)))},t.prototype.calcMD5=function(t){return this.binl2hex(this.coreMD5(this.str2binl(t)))},t}();__reflect(MD5.prototype,"MD5");var MUtils;!function(t){var e=function(){function t(){}return t.prototype.Minit=function(t,e,i,n,o){this.mName=t,this.mTotal=e,this._mDeplete=this._mDelayed=i,this._mCallFun=n,this._mThisObj=o,this.mCurrentTime=0},t.prototype.Mupdate=function(t){this._mDeplete-=t,this._mDeplete<=0&&(this.mCurrentTime++,this._mCallFun.call(this._mThisObj,this),this._mDeplete=this._mDelayed,this.mCurrentTime>=this.mTotal&&GTimerMag.getInstance.GremoveTimerTask(this.mName))},t.prototype.clean=function(){},t}();t.MTimerTask=e,__reflect(e.prototype,"MUtils.MTimerTask",["GIObjPool"])}(MUtils||(MUtils={}));