/**
 * 
//奖金方案  reward.php
参数：
o:订单id
返回
{
	"res":0
	"data":[
        {
           "type":1 //1=>单关 2=>2串一 以此类推 到8=>8串一
           "team":[
               [庆南FC,1,4.05], //球队名，类型，赔率
               [庆南FC,1,4.05],
               [庆南FC,1,4.05],
           ]
           "b":1  //倍数
           "reward":766.26  //预测奖金
        }

	]
}
 */
class RewardPhp implements IProHandle {
	private static _mInstance: RewardPhp;
	public static get getInstance(): RewardPhp {
		if (RewardPhp._mInstance == undefined)
			RewardPhp._mInstance = new RewardPhp();
		return RewardPhp._mInstance;
	}
	/**对象key */
	private data: HttpData;
	private constructor() {
		this.data = new HttpData();
		this.data.mKey = "RewardPhp";
	}

	/**
	 * user
	 */
	public sendHttp(oid:string,type:number): void {
		let url: string = HTTPRequest.getInstance.httpHeadUrl + "/reward.php";

		let content = `o=${oid}&t=${type}&v=${GameValue.verPhp}`;
		HTTPRequest.getInstance.proSend(url, content, this.data);
	}

	private  _mlll:Array<RewardData> = new Array<RewardData>();
	public backHTTP(res: boolean, httpObj: egret.HttpRequest, data: HttpData): void {
        if (res == true && httpObj.response != "") {//请求成功
            let text: Object;
            try {
				text = JSON.parse(httpObj.response);
			} catch (error) {
				Alertpaner.getInstance.show(error);
				return;
			}
            if(text["res"]!="0"){
                Alertpaner.getInstance.show(text["res"]+":"+text["msg"]);
			} else if(text["res"] == "0"){
				let arr:Array<any> = text["data"];
				let re:RewardData;
				this._mlll.length = 0;
				for(let i=0;arr.length;i++) {
					re = new RewardData();
					re.type = arr["type"];
					re.team = arr["team"];
					re.b = arr["b"];
					re.reward = arr["reward"];

					this._mlll[i] = re;
				}
			}
			
        }
    }
}

class RewardData {
	/**1=>单关 2=>2串一 以此类推 到8=>8串一*/
	public type:number;
	/**team [ [庆南FC,1,4.05], //球队名，类型，赔率 [庆南FC,1,4.05],  [庆南FC,1,4.05], ]*/
	public team:string[] = [];
	/**倍数 */
	public b:number;
	/**reward 预测奖金*/
	public reward:number;
}
