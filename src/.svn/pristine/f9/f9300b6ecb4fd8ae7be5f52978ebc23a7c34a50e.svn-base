/**足球 投 */
class GoFBBuy extends egret.DisplayObjectContainer{
    private static _mInstance: GoFBBuy;
	public static get getInstance(): GoFBBuy {
		if (GoFBBuy._mInstance == undefined)
			GoFBBuy._mInstance = new GoFBBuy();
		return GoFBBuy._mInstance;
	}

    private _topUI:TopUI;
    private _return:egret.Shape;

    /**倍数优化 */
    private _bsBtn:egret.Bitmap;
    private _topContain:egret.DisplayObjectContainer;
    private _mContain:egret.DisplayObjectContainer;
    private _scroView:egret.ScrollView;
    private _downContain:egret.DisplayObjectContainer;

    constructor(){
        super();
        this.touchEnabled = true;
        
        this._topUI = new TopUI("竞彩足球投注");
        this.addChild(this._topUI);
        this._return = this._topUI.getReturn();
        this._return.addEventListener(egret.TouchEvent.TOUCH_TAP,(e)=>{this.hide(); },this);

        this._mContain = new egret.DisplayObjectContainer();
        this.addScoll();
        this.joinTop();
        this.joinDown();

        this._bsBtn = new egret.Bitmap();
        this.addChild(this._bsBtn);
        this._bsBtn.touchEnabled = true;
        RES.getResByUrl("resource/assets/images/ui/bsyh_home@2x.png",(e)=>{
            // this._bsBtn.$setBitmapData(e);
            this._bsBtn.x = GameMain.getInstance.StageWidth - this._bsBtn.width;
            this._bsBtn.y = GameMain.getInstance.StageHeight - this._bsBtn.height - 240;
        },this);

        this.setDB();
    }

    private touchDown(e:egret.TouchEvent){
        if(e.target == this._downLeftText){
            FBselect.getInstance.show(this._data);
        }
    }


    private _data:Array<Strand>;
    public show(data:Array<Strand>):void{
        GUIManager.getInstance.tipLay.addChild(this);

        this._data = data;
        egret.log(this._data);
    }

    public hide():void{
        if(this.parent!=undefined){
            this.parent.removeChild(this);
        }
    }

    private _topText:egret.TextField;
    private joinTop():void{
        this._topContain = new egret.DisplayObjectContainer();
        this.addChild(this._topContain);
        this._topContain.y = 136;
        
        let topShape = new egret.Shape();
        this._topContain.addChild(topShape);
        topShape.graphics.beginFill(0xffffff);
        topShape.graphics.drawRect(0,0,750,80);
        topShape.touchEnabled = true;
        topShape.addEventListener(egret.TouchEvent.TOUCH_TAP,()=>{this.hide(); },this);

        let topBtn = new egret.Bitmap();
        this._topContain.addChild(topBtn);
        topBtn.x = 192;
        topBtn.y = 26;
        RES.getResByUrl("resource/assets/images/ui/tj_home@2x.png",(e)=>{topBtn.$setBitmapData(e); },this);

        this._topText = ToolMrg.getText(238,26,28,0x333333);
        this._topContain.addChild(this._topText);
        this._topText.text = "继续选中比赛";

        let topLink = new egret.Shape();
        this._topContain.addChild(topLink);
        topLink.graphics.beginFill(0xdedede);
        topLink.graphics.drawRect(0,78.5,750,1.5);
    }

    /**10注18倍 360 元 */
    private _downTitle:egret.TextField;
    /**预测奖金：82.09元～102.71元 */
    private _downContent:egret.TextField;
    private _goBtn:egret.Bitmap;
    /** 例如：3串1 */
    private _downLeftText:egret.TextField;
    private _multipleText:egret.TextField;
    private joinDown():void{
        this._downContain = new egret.DisplayObjectContainer();
        this.addChild(this._downContain);
        this._downContain.y = GameMain.getInstance.StageHeight - 200 - this.y;

        let downBJ = new egret.Bitmap();
        this._downContain.addChild(downBJ);
        downBJ.y = -10; 
        RES.getResByUrl("resource/assets/images/ui/bg_tabbar@2x.png",(e)=>{downBJ.$setBitmapData(e); },this);

        let dowmShape = new egret.Shape();
        this._downContain.addChild(dowmShape);
        dowmShape.graphics.beginFill(0xdedede);
        dowmShape.graphics.drawRect(0,98.5,750,1.5);

        this._downLeftText = ToolMrg.getText(0,0,28,0x333333,375);
        this._downContain.addChild(this._downLeftText);
        this._downLeftText.height = 100;
        this._downLeftText.verticalAlign = egret.VerticalAlign.MIDDLE;
        this._downLeftText.textAlign = egret.HorizontalAlign.CENTER;
        this._downLeftText.touchEnabled = true;
        this._downLeftText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchDown,this);

        let downCenter = new egret.Shape();
        this._downContain.addChild(downCenter);
        downCenter.graphics.beginFill(0xdedede);
        downCenter.graphics.drawRect(374,32,2,40);

        let downText = ToolMrg.getText(450,30,28,0x333333);
        this._downContain.addChild(downText);
        downText.height = 40;
        downText.verticalAlign = egret.VerticalAlign.MIDDLE;
        downText.text = "投                      倍";

        let shapeBox = new egret.Shape();
        this._downContain.addChild(shapeBox);
        shapeBox.graphics.beginFill(0xcacaca);
        shapeBox.graphics.drawRoundRect(486,22,160,60,12);

        let shapeContent = new egret.Shape();
        this._downContain.addChild(shapeContent);
        shapeContent.graphics.beginFill(0xffffff);
        shapeContent.graphics.drawRoundRect(487.5,23.5,157,57,12);

        this._multipleText = ToolMrg.getText(486,30,28,0x333333,160);
        this._downContain.addChild(this._multipleText);
        this._multipleText.height = 40;
        this._multipleText.verticalAlign = egret.VerticalAlign.MIDDLE;
        this._multipleText.textAlign = egret.HorizontalAlign.CENTER;
        this._multipleText.text  = "1";

        let leftBtn = new egret.Bitmap();
        this._downContain.addChild(leftBtn);
        leftBtn.x = 330;
        leftBtn.y = 44;
        RES.getResByUrl("resource/assets/images/ui/xiala_nav@2x.png",(e)=>{leftBtn.$setBitmapData(e); },this)

        this._downTitle = ToolMrg.getText(0,108,32,0x333333,556);
        this._downContain.addChild(this._downTitle);
        this._downTitle.textAlign = egret.HorizontalAlign.CENTER;
        this._downTitle.text = `10注18倍360元`;

        this._downContent = ToolMrg.getText(0,164,20,0xf72e52,556);
        this._downContain.addChild(this._downContent);
        this._downContent.textAlign = egret.HorizontalAlign.CENTER;
        this._downContent.text = `预测奖金：82.09元～102.71元`;

        this._goBtn = new egret.Bitmap();
        this._downContain.addChild(this._goBtn);
        this._goBtn.x = 556;
        this._goBtn.y = 110;
        this._goBtn.touchEnabled = true;
        RES.getResByUrl("resource/assets/images/ui/xhl_button@2x.png",(e)=>{this._goBtn.$setBitmapData(e); },this);

        let goText = ToolMrg.getText(612,134,32,0xffffff);
        this._downContain.addChild(goText);
        goText.text = "投注";
    }

    private addScoll(): void {
		this._scroView = new egret.ScrollView();
		this._scroView.x = 0;
		this._scroView.y = 136+80;
		this._scroView.scrollSpeed = 0.4;
		//设置滚动内容
		this._scroView.setContent(this._mContain);
		this._scroView.bounces = false;
		this._scroView.verticalScrollPolicy = 'on';
		this._scroView.horizontalScrollPolicy = 'off';
		//设置滚动区域宽高
		this._scroView.width = GameMain.getInstance.StageWidth;
		this._scroView.height = GameMain.getInstance.StageHeight - this.y - 200 - this._scroView.y;
		this.addChild(this._scroView);
	}

    private _mShareC: egret.Shape;
	/**适配处理 */
	private setDB(): void {
		this._mShareC = new egret.Shape();
		this._mShareC.graphics.beginFill(0xffffff, 1);
		this._mShareC.graphics.drawRect(0, 0, GameMain.getInstance.StageWidth,GameMain.getInstance.StageHeight);
		this.addChildAt(this._mShareC, 0);

        let mShape = new egret.Shape();
        mShape.graphics.beginFill(0xF5F5F7, 1);
		mShape.graphics.drawRect(0, 0, GameMain.getInstance.StageWidth,GameMain.getInstance.StageHeight - 336);
		this._mContain.addChildAt(mShape, 0);
    }
}

class GoFBBuyInfo extends egret.DisplayObjectContainer{
    private _dayOfcode:egret.TextField;
    private _team1:egret.TextField;
    private _team2:egret.TextField;
    private _vs:egret.TextField;

    private _clickBtn:egret.Bitmap;

    constructor(){
        super();

        this._dayOfcode = ToolMrg.getText(28,27,24,0x999999);
        this.addChild(this._dayOfcode);

        this._team1 = ToolMrg.getText(234+24*3,27,24,0x333333,200);
        this.addChild(this._team1);
        this._team1.textAlign = egret.HorizontalAlign.RIGHT;

        this._team2 = ToolMrg.getText(444,27,20,0x333333);
        this.addChild(this._team2);

        this._vs = ToolMrg.getText(362,27,24,0x999999);
        this.addChild(this._vs);
        this._vs.text = "VS";

        this._clickBtn = new egret.Bitmap();
        this.addChild(this._clickBtn);
        RES.getResByUrl("resource/assets/images/ui/scdd_home@2x.png",(e)=>{this._clickBtn.$setBitmapData(e); },this);
        this._clickBtn.x = 692;
        this._clickBtn.y = 84;
    }

}