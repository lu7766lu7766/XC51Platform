/**投注内容 new */
class MlContentInfo extends egret.DisplayObjectContainer{
    /**内容 */
    private _topText:egret.TextField;//1串1
    private _centerText:egret.TextField;//全北现代 vs 上海上巷
    private _downText:egret.TextField;//胜 3.70
    /**奖金 */
    private _moneyText:egret.TextField;
    /**倍数(文字) 默认1 */
    private _MultiplierText:egret.TextField;
    public _Multiplier:number=1;

    private _isInterception=false;

    constructor(){
        super();

        let link1 = new egret.Shape();
        this.addChild(link1);
        link1.graphics.beginFill(0xDEDEDE);
        link1.graphics.drawRect(0,118.5,750,1.5);

        let link2 = new egret.Shape();
        this.addChild(link2);
        link2.graphics.beginFill(0xdedede);
        link2.graphics.drawRect(372,0,1.5,120);

        let link3 = new egret.Shape();
        this.addChild(link3);
        link3.graphics.beginFill(0xdedede);
        link3.graphics.drawRect(572,0,1.5,120);

        this._topText = ToolMrg.getText(0,13,24,0xff7000,372);
        this.addChild(this._topText);
        this._topText.textAlign = egret.HorizontalAlign.CENTER;

        this._centerText = ToolMrg.getText(0,50,20,0x333333,372);
        this.addChild(this._centerText);
        this._centerText.textAlign = egret.HorizontalAlign.CENTER;

        this._downText = ToolMrg.getText(0,80,20,0x999999,372);
        this.addChild(this._downText);
        this._downText.textAlign = egret.HorizontalAlign.CENTER;

        this._moneyText = ToolMrg.getText(372,0,32,0xf72e52,200);
        this.addChild(this._moneyText);
        this._moneyText.height = 120;
        this._moneyText.verticalAlign = egret.VerticalAlign.MIDDLE;
        this._moneyText.textAlign = egret.HorizontalAlign.CENTER;


        let box = new egret.Shape();
        this.addChild(box);
        box.graphics.beginFill(0xdedede);
        box.graphics.drawRoundRect(612,32,100,60,12);

        let boxShape = new egret.Shape();
        this.addChild(boxShape);
        boxShape.graphics.beginFill(0xffffff);
        boxShape.graphics.drawRoundRect(613.5,33.5,97,57,12);

        this._MultiplierText = ToolMrg.getText(612,32,32,0x333333,100);
        this.addChild(this._MultiplierText);
        this._MultiplierText.height = 60;
        this._MultiplierText.verticalAlign = egret.VerticalAlign.MIDDLE;
        this._MultiplierText.textAlign = egret.HorizontalAlign.CENTER;
        this._MultiplierText.text = "1";
        this._MultiplierText.type = egret.TextFieldType.INPUT;
        this._MultiplierText.inputType = egret.TextFieldInputType.TEXT;

        this.setDB();
    }

    private _mShareC: egret.Shape;
	/**适配处理 */
	private setDB(): void {
		this._mShareC = new egret.Shape();
		this._mShareC.graphics.beginFill(0xF5F5F7, 1);
		this._mShareC.graphics.drawRect(0, 0, GameMain.getInstance.StageWidth,120);
		this.addChildAt(this._mShareC, 0);
    }

    private _id;
    /**选中 */
    private _listStrand:Strand[];
    private _bsYHData:BSYHData;

    public aa(id,listStrand:Array<Strand>,bsYHData:BSYHData):void{
        this._id = id;
        this._listStrand = listStrand;
        this._bsYHData = bsYHData;
        this._topText.text = bsYHData.cType +"串1";
        let str:string = "";
        let objData:any;
        let bs:number = 1;
        for(let i = 0; i < bsYHData.list.length;i++) {
            objData = bsYHData.list[i];
            str += objData.team_a_name +"=胜["+objData.listSX[objData.xb] +"] \n";
            bs *= GuessingFootballMrg.getInstance.getYHBS(this._listStrand, this._bsYHData);
        }
        this._centerText.text = str;
        this._moneyText.text = ""+bs * 2;
    }

    private changeText():void{
        this._Multiplier = Math.floor(Number(this._MultiplierText.text));
        if(this._Multiplier > 1) {
            if(this._bsYHData != undefined) {
                GuessingFootballMrg.getInstance.setYHBS(this._listStrand, this._bsYHData, this._Multiplier);
            }
            this.aa(this._id, this._listStrand, this._bsYHData);   
        }
        // MultiplierDetail.getInstance.changeMultiplier();
    }

    /**获取下注倍数 */
    public getXZJE():number {
        return this._Multiplier;
    }

    /**获取奖金 */
    public getJJ():number {
        return Number(this._MultiplierText);
    }

    private textInput2() {
		if (this._Multiplier < 1) {
            this._Multiplier = 1;
		} 
        this._MultiplierText.text = ""+this._Multiplier;
        GuessingFootballMrg.getInstance.setYHBS(this._listStrand, this._bsYHData, this._Multiplier);
        this.aa(this._id, this._listStrand, this._bsYHData);   
	}

    public addInterception():void{
        if(!this._isInterception){
            this._MultiplierText.addEventListener(egret.TouchEvent.CHANGE,this.changeText,this);
            this._MultiplierText.addEventListener(egret.Event.FOCUS_OUT, this.textInput2, this);
            this._isInterception = true;
        }
    }

    public removeInterception():void{
        if(this._isInterception){
            this._Multiplier = 1;
            this._MultiplierText.text = ""+this._Multiplier;
            GuessingFootballMrg.getInstance.setYHBS(this._listStrand, this._bsYHData, 1);

            this._MultiplierText.removeEventListener(egret.TouchEvent.CHANGE,this.changeText,this);
            this._MultiplierText.removeEventListener(egret.Event.FOCUS_OUT, this.textInput2, this);
            this._isInterception = false;
        }
    }
}