class G1infoMsg{
    private static _mInstance: G1infoMsg;
	public static get getInstance(): G1infoMsg {
		if (G1infoMsg._mInstance == undefined)
			G1infoMsg._mInstance = new G1infoMsg();
		return G1infoMsg._mInstance;
	}
    public item:GHashMap<G1infoData>;

    constructor(){
        this.item = new GHashMap<G1infoData>();
    }
}

class G1info extends egret.DisplayObjectContainer{
    private _time:egret.TextField;
    private _lookImg:egret.Bitmap;
    private _item:GHashMap<G1info_info>;
    /**0打开 1收起 */
    private _type = 0;

    constructor(){
        super();
        this._item = new GHashMap<G1info_info>();

        this._time = ToolMrg.getText(244,0,20,0x333333);
        this.addChild(this._time);
        this._time.height = 48;
        this._time.verticalAlign = egret.VerticalAlign.MIDDLE;

        this._lookImg = new egret.Bitmap();
        this.addChild(this._lookImg);
        RES.getResByUrl("resource/assets/images/ui/xq1_nav@2x.png",(e)=>{
            this._lookImg.$setBitmapData(e);
            this._lookImg.y = (48 - this._lookImg.height)*0.5;
        },this);

        this.setDB();
    }

    private _data:G1infoData;
    public aa(data:G1infoData):void{
        this._data = data;

        this._time.text = `${data.time}  共${data.siteNum}场`;
        this._lookImg.x = this._time.textWidth + 254;
        let objHeight = 48;
        for(let key of data.item.keys){
            let obj:G1info_info;
            if(this._item.GhasKey(key)){
                obj = this._item.Gget(key);
            }else{
                obj = new G1info_info();
                this._item.Gput(key,obj);
            }
            obj.aa(data.item.Gget(key));
            obj.y = objHeight;
            objHeight = objHeight + obj.height;
            if(obj.parent==undefined)
                this.addChild(obj);
        }

    }

    private touchDown(e:egret.TouchEvent):void{
        if(this._type==0){//收起
            this._type=1;
        }else if(this._type==1){//打开
            this._type=0;
        }
    }

    private _mShareC: egret.Shape;
	/**适配处理 */
	private setDB(): void {
		this._mShareC = new egret.Shape();
		this._mShareC.graphics.beginFill(0xf5f5f7, 1);
		this._mShareC.graphics.drawRect(0, 0, GameMain.getInstance.StageWidth, 48);
		this.addChildAt(this._mShareC, 0);
        this._mShareC.touchEnabled = true;
        this._mShareC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchDown,this);
    }
}

class G1info_info extends egret.DisplayObjectContainer{
    private _typeName:egret.TextField;
    private _dayText:egret.TextField;
    private _endText:egret.TextField;
    private _team1:egret.TextField;
    private _team2:egret.TextField;
    private _vs:egret.TextField;
    private _rang1:egret.Shape;
    private _rang2:egret.Shape;
    private _rang1Text:egret.TextField;
    private _rang2Text:egret.TextField;
    /**料 */
    private _limg:egret.Bitmap;
    // private _p1:GHashMap<>;
    // private _p2:GHashMap<>;

    constructor(){
        super();

        let shape1 = new egret.Shape();
        this.addChild(shape1);
        shape1.graphics.beginFill(0x979797);
        shape1.graphics.drawRect(160,70,40,112);

        this._rang1 = new egret.Shape();
        this.addChild(this._rang1);
        this._rang1.graphics.beginFill(0xffffff);
        this._rang1.graphics.drawRect(161.5,71.5,37,52);

        this._rang2 = new egret.Shape();
        this.addChild(this._rang2);
        this._rang2.graphics.beginFill(0xffffff);
        this._rang2.graphics.drawRect(161.5,71.5+55+2,37,52);

        this._rang1Text = ToolMrg.getText(160,70,20,0x999999,40);
        this.addChild(this._rang1Text);
        this._rang1Text.height = 56;
        this._rang1Text.textAlign = egret.HorizontalAlign.CENTER;
        this._rang1Text.verticalAlign = egret.VerticalAlign.MIDDLE;

        this._rang2Text = ToolMrg.getText(160,70+56,20,0xffffff,40);
        this.addChild(this._rang2Text);
        this._rang2Text.height = 56;
        this._rang2Text.textAlign = egret.HorizontalAlign.CENTER;
        this._rang2Text.verticalAlign = egret.VerticalAlign.MIDDLE;

        this._typeName = ToolMrg.getText(26,24,24,0xff7000);
        this.addChild(this._typeName);

        this._dayText = ToolMrg.getText(26,86,20,0x999999);
        this.addChild(this._dayText);

        this._endText = ToolMrg.getText(26,140,20,0x999999);
        this.addChild(this._endText);

        this._team1 = ToolMrg.getText(32+20,24,24,0x333333,300);
        this.addChild(this._team1);
        this._team1.textAlign = egret.HorizontalAlign.RIGHT;

        this._team2 = ToolMrg.getText(490,24,24,0x333333);
        this.addChild(this._team2);

        this._vs = ToolMrg.getText(410,24,24,0x999999);
        this.addChild(this._vs);
        this._vs.text = "VS";

        this._limg = new egret.Bitmap();
        this.addChild(this._limg);
        this._limg.x = 692;
        this._limg.y = 18;
        RES.getResByUrl("resource/assets/images/ui/liao_expert@2x.png",(e)=>{
            this._limg.$setBitmapData(e);
        },this);

        this.setDB();
    }

    private _data:G1infoData_infodata;
    public aa(data:G1infoData_infodata):void{

    }

    private _mShareC: egret.Shape;
	/**适配处理 */
	private setDB(): void {
		this._mShareC = new egret.Shape();
		this._mShareC.graphics.beginFill(0xffffff, 1);
		this._mShareC.graphics.drawRect(0, 0, GameMain.getInstance.StageWidth, 210);
		this.addChildAt(this._mShareC, 0);
    }
}

class G1info_info_ctInfo extends egret.DisplayObjectContainer{
    private _text:egret.TextField;
    private _box:egret.Shape;
    private _num:egret.TextField;
    public ofType=0;

    constructor(id){
        super();

        let box = new egret.Shape();
        this.addChild(box);
        box.graphics.beginFill(0x999999);
        box.graphics.drawRect(0,0,140,56);

        this._box = new egret.Shape();
        this.addChild(this._box);
        this._box.graphics.beginFill(0xF5F5F7);
        this._box.graphics.drawRect(1.5,1.5,137,53);
        this._box.touchEnabled = true;
        this._box.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchDown,this);

        this._text = ToolMrg.getText(30,14,24,0x333333);
        this.addChild(this._text);

        this._num = ToolMrg.getText(64,14,24,0x999999);
        this.addChild(this._num);
        if(id==0){
            this._text.text = "胜";
        }else if(id==1){
            this._text.text = "平";
        }else if(id==2){
            this._text.text = "负";
        }
    }

    public aa():void{

    }

    private touchDown(e:egret.TouchEvent):void{
        this._box.graphics.clear();
        if(this.ofType==0){//选中
            this.ofType=1;
            this._box.graphics.beginFill(0xf72e52);
            this._text.textColor = 0xffffff;
            this._num.textColor = 0xffffff;
        }else if(this.ofType==1){//不选
            this.ofType=0;


            this._box.graphics.beginFill(0xF5F5F7);
            this._text.textColor = 0x333333;
            this._num.textColor = 0x999999;
        }

        this._box.graphics.drawRect(1.5,1.5,137,53);

    }

}

class G1infoData{
    public id;
    public time:number;
    /**场数 */
    public siteNum:string;
    public item:GHashMap<G1infoData_infodata>;
    constructor(){
        this.item = new GHashMap<G1infoData_infodata>();
    }
}

/** a主 b客 */
class G1infoData_infodata{
    public id;
    /**类型 如：欧冠杯 */
    public type:string;
    /**序号 */
    public orderNum:string;
    /**截止时间 */
    public endTime:number;
    public team1:string;
    public team2:string;
    /**盘b */
    public rang:string;

    public team1wina:string;
    public drewa:string;
    public team2wina:string;

    public team1winb:string;
    public drewb:string;
    public team2winb:string;

}