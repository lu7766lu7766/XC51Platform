/**篮球引用 方块Block */
class BasketballBlock extends egret.DisplayObjectContainer{
    private _box:egret.Shape;
    private _boxShape:egret.Shape;
    private _title:egret.TextField;
    private _content:egret.TextField;

    private _boxColor:number;
    private _boxShapeColor:number;
    /**不直接返回BasketBallWnd */
    private _toGo:number;
    /**是否侦听 */
    private _isInterception=false;
    /**是否选中 */
    public selectType = false;
    /**当前模块所属下标 */
    public _blockIndex = 0;
    /**当前所属id */
    private _id;

    private _width = 0;
    private _height = 0;
    /** 当前所属下标 宽度 高度 box边框颜色 box内容颜色 toGo点击传递数据页面 titley不填默认 contenty不填默认 */
    constructor(index:number,width:number,height:number,boxColor:number,boxShapeColor:number,toGo?:number,titleTop?:number,contentTop?:number){
        super();
        this.touchEnabled = true;
        this._height = height;
        this._width = width;
        this._blockIndex = index;
        this._boxColor = boxColor;
        this._boxShapeColor = boxShapeColor;

        this._box = new egret.Shape();
        this.addChild(this._box);
        this._box.graphics.beginFill(this._boxColor);
        this._box.graphics.drawRoundRect(0,0,width,height,20);
        this._box.graphics.endFill();

        this._boxShape = new egret.Shape();
        this.addChild(this._boxShape);
        this._boxShape.graphics.beginFill(this._boxShapeColor);
        this._boxShape.graphics.drawRoundRect(1.5,1.5,width-3,height-3,20);
        this._boxShape.graphics.endFill();

        this._title = ToolMrg.getText(0,21,24,0x333333,width);
        this.addChild(this._title);
        this._title.textAlign = egret.HorizontalAlign.CENTER;
        if(titleTop!=undefined)
            this._title.y = titleTop;

        this._content = ToolMrg.getText(0,55,24,0x999999,width);
        this.addChild(this._content);
        this._content.textAlign = egret.HorizontalAlign.CENTER;
        if(contentTop!=undefined)
            this._content.y = contentTop;

        if(toGo!=null)
            this._toGo = toGo;
    }

    /**当前所属id */
    public aa(id,topText?:string,downText?:string):void{
        this._id = id;

        if(topText!=null)
            this._title.text = topText;
        if(downText!=null)
            this._content.text = downText;
    }

    public changeCss():void{
        this._boxShape.graphics.clear();
        if(this.selectType){//当前选中
            this._title.textColor = 0xffffff;
            this._content.textColor = 0xffffff;
            this._boxShape.graphics.beginFill(0xF72E52);
            this._boxShape.graphics.drawRoundRect(0,0,this._width,this._height,20);
        }else{
            this._title.textColor = 0x333333;
            this._content.textColor = 0x999999;
            this._boxShape.graphics.beginFill(this._boxShapeColor);
            this._boxShape.graphics.drawRoundRect(1.5,1.5,this._width-3,this._height-3,20);
        }
        this._boxShape.graphics.endFill();
    }

    public clear():void{
        this.selectType = false;
        this.changeCss();
    }

    private touchDown(e:egret.TouchEvent):void{
        this.selectType = !this.selectType;
        if(this._toGo==0){//篮球串关更多玩法
            B1more.getInstance.addData(this._blockIndex,this.selectType);
        }else if(this._toGo==1){//胜分差
            B5more.getInstance.addData(this._blockIndex,this.selectType);
        }else
            BasketBallWnd.getInstance.changeTextAndData(this._id,this._blockIndex,this.selectType);

        this.changeCss();
    }

    public addInterception():void{
        if(!this._isInterception){
            this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchDown,this);
            this._isInterception = true;
        }
    }

    public removeInterception(){
        if(this._isInterception){
            this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchDown,this);
            this._isInterception = false;
        }
    }

}